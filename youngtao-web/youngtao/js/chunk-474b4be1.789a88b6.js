(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-474b4be1"],{"074d":function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"d",(function(){return r})),s.d(e,"e",(function(){return c})),s.d(e,"c",(function(){return i})),s.d(e,"b",(function(){return u}));var a=s("6b02");function n(t){return Object(a["a"])({url:"omc/cart/add",method:"post",data:JSON.stringify(t)})}function r(){return Object(a["a"])({url:"omc/cart/getUserCart",method:"get"})}function c(t){return Object(a["a"])({url:"omc/cart/updateNum",method:"post",data:JSON.stringify(t)})}function i(t){return Object(a["a"])({url:"omc/cart/delete",method:"post",data:JSON.stringify(t)})}function u(t){return Object(a["a"])({url:"omc/cart/batchDelete",method:"post",data:JSON.stringify(t)})}},"18dd":function(t,e,s){},"4df4":function(t,e,s){"use strict";var a=s("0366"),n=s("7b0b"),r=s("9bdd"),c=s("e95a"),i=s("50c4"),u=s("8418"),o=s("35a1");t.exports=function(t){var e,s,l,d,f,k,m=n(t),h="function"==typeof this?this:Array,p=arguments.length,b=p>1?arguments[1]:void 0,v=void 0!==b,y=o(m),g=0;if(v&&(b=a(b,p>2?arguments[2]:void 0,2)),void 0==y||h==Array&&c(y))for(e=i(m.length),s=new h(e);e>g;g++)k=v?b(m[g],g):m[g],u(s,g,k);else for(d=y.call(m),f=d.next,s=new h;!(l=f.call(d)).done;g++)k=v?r(d,b,[l.value,g],!0):l.value,u(s,g,k);return s.length=g,s}},"7de9":function(t,e,s){"use strict";s.d(e,"b",(function(){return n})),s.d(e,"a",(function(){return r}));var a=s("6b02");function n(t){return Object(a["a"])({url:"gmc/product/".concat(t),method:"get"})}function r(t){return Object(a["a"])({url:"gmc/product/confirmOrder",method:"post",data:JSON.stringify(t)})}},"7f53":function(t,e,s){"use strict";var a=s("18dd"),n=s.n(a);n.a},a630:function(t,e,s){var a=s("23e7"),n=s("4df4"),r=s("1c7e"),c=!r((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:c},{from:n})},ad3e:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container pt-3"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{md:12}},[s("div",{staticClass:"sku-images"},[s("el-carousel",{attrs:{height:"450px"}},t._l(t.checkedSku.images,(function(t){return s("el-carousel-item",{key:t},[s("img",{attrs:{src:t,alt:""}})])})),1)],1)]),s("el-col",{attrs:{md:12}},[s("div",{staticClass:"sku-title"},[0==t.checkedSku.type?s("el-tag",{attrs:{type:"info",size:"mini"}},[t._v("缺货中")]):t._e(),1==t.checkedSku.type?s("el-tag",{attrs:{size:"mini"}},[t._v("新品")]):t._e(),2==t.checkedSku.type?s("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v("活动中")]):t._e(),t._v(" "+t._s(t.checkedSku.title||"赶紧让掌柜补货吧")+" ")],1),s("div",{staticClass:"summary-price-wrap"},[s("div",{staticClass:"sku-price"},[s("span",[t._v(" 优惠价："),s("span",{staticClass:"price"},[t._v("￥"+t._s(t.checkedSku.price||0))])]),s("s",[t._v("原价：￥"+t._s(t.checkedSku.oldPrice||0)+" ")])]),s("div",{staticClass:"sku-sales"},[s("small",{staticClass:"pr-3"},[t._v("累计评价: "+t._s(t.spu.commentNum||0))]),s("small",[t._v("累计销售："+t._s(t.spu.saleNum||0))])])]),s("el-form",{ref:"form",staticClass:"sku-form",attrs:{"label-width":"80px","label-position":"left"}},t._l(t.spu.skuTemplate,(function(e,a){return s("el-form-item",{key:a,attrs:{label:a}},[s("el-radio-group",{model:{value:t.checkedObj[a],callback:function(e){t.$set(t.checkedObj,a,e)},expression:"checkedObj[name]"}},t._l(e,(function(e){return s("el-radio",{key:e,attrs:{label:e},on:{change:function(e){return t.calculate()}}})})),1)],1)})),1),s("div",{staticClass:"sku-amount"},[s("span",{staticClass:"pr-3"},[s("span",{staticClass:"sku-form-lable"},[t._v(" 数量：")]),s("el-input-number",{attrs:{min:1,max:t.checkedSku.num||0,precision:0,size:"mini"},model:{value:t.selctedNum,callback:function(e){t.selctedNum=e},expression:"selctedNum"}})],1),s("small",{staticClass:"text-muted"},[t._v("剩余库存："+t._s(t.checkedSku.num||0))])]),s("div",{staticClass:"sku-buy"},[s("el-button",{attrs:{type:"success",plain:""},on:{click:t.buy}},[t._v("立即购买")]),s("el-button",{attrs:{type:"primary",plain:"",disabled:2==t.checkedSku.type},on:{click:t.addCart}},[t._v("加入购物车")])],1),s("div",{staticClass:"sku-serve"},[s("span",{staticClass:"sku-form-lable"},[t._v("服务说明：")]),t._v(" "+t._s(t.spu.serve?t.spu.serve:"暂无")+" ")]),s("div",{staticClass:"extra-pay"},[s("span",{staticClass:"sku-form-lable"},[t._v("支付方式：")]),s("div",{staticClass:"fl list list-nomaibei"})])],1)],1)],1)},n=[],r=s("b85c"),c=s("d4ec"),i=s("bee2"),u=s("262e"),o=s("2caf"),l=s("9ab4"),d=s("60a3"),f=s("7de9"),k=s("074d"),m=function(t){Object(u["a"])(s,t);var e=Object(o["a"])(s);function s(){var t;return Object(c["a"])(this,s),t=e.apply(this,arguments),t.spu={},t.skuList=[],t.checkedObj={},t.selctedNum=1,t.checkedSku={},t}return Object(i["a"])(s,[{key:"mounted",value:function(){this.getProduct()}},{key:"getProduct",value:function(){var t=this;Object(f["b"])(this.$route.params.id).then((function(e){t.$log.info("获取商品",e),t.spu=e.data,t.skuList=e.data.skuList;var s=t.$route.query.skuId;if(s){var a,n=Object(r["a"])(t.skuList);try{for(n.s();!(a=n.n()).done;){var c=a.value;if(c.skuId===s){t.checkedSku=c;break}}}catch(i){n.e(i)}finally{n.f()}}"{}"===JSON.stringify(t.checkedSku)&&(t.checkedSku=t.skuList[0]),t.checkedObj=t.$utils.copyOf(t.checkedSku.sku)}))}},{key:"addCart",value:function(){var t=this;this.checkedSku.skuId?Object(k["a"])({skuId:this.checkedSku.skuId,num:this.selctedNum}).then((function(e){t.$message({type:"success",message:"加入购物车成功"}),t.$log.info("加购",e)})):this.$message({type:"info",message:"暂无该商品，换个吧"})}},{key:"buy",value:function(){if(this.checkedSku.skuId){var t={type:this.checkedSku.type,skuList:[{skuId:this.checkedSku.skuId,count:this.selctedNum}],isCart:!1},e=this.$utils.setOrderItem(t);this.$router.push("/order/confirm/".concat(e))}else this.$message({type:"info",message:"暂无该商品，换个吧"})}},{key:"calculate",value:function(){var t,e=Object(r["a"])(this.skuList);try{for(e.s();!(t=e.n()).done;){var s=t.value;if(JSON.stringify(s.sku)===JSON.stringify(this.checkedObj))return void(this.checkedSku=s)}}catch(a){e.e(a)}finally{e.f()}this.checkedSku={images:this.spu.images,type:0}}}]),s}(d["e"]);m=Object(l["a"])([d["a"]],m);var h=m,p=h,b=(s("7f53"),s("2877")),v=Object(b["a"])(p,a,n,!1,null,"2a75d70c",null);e["default"]=v.exports},b0c0:function(t,e,s){var a=s("83ab"),n=s("9bf2").f,r=Function.prototype,c=r.toString,i=/^\s*function ([^ (]*)/,u="name";a&&!(u in r)&&n(r,u,{configurable:!0,get:function(){try{return c.call(this).match(i)[1]}catch(t){return""}}})},b85c:function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));s("a4d3"),s("e01a"),s("d28b"),s("e260"),s("d3b7"),s("3ca3"),s("ddb0"),s("a630"),s("fb6a"),s("b0c0"),s("25f0");function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}function n(t,e){if(t){if("string"===typeof t)return a(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(s):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?a(t,e):void 0}}function r(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=n(t))){var e=0,s=function(){};return{s:s,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,c=!0,i=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return c=t.done,t},e:function(t){i=!0,r=t},f:function(){try{c||null==a["return"]||a["return"]()}finally{if(i)throw r}}}}}}]);
//# sourceMappingURL=chunk-474b4be1.789a88b6.js.map